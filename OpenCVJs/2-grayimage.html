<!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>Hello OpenCV.js</title>
        </head>
        <body>
            <h2>Gray Image</h2>
            <p id="status">OpenCV.js is loading...</p>
            <div>
                <table cellpadding="0" cellspacing="0" width="0" border="0">
                <tr>
                    <td>
                        <canvas id="canvasInput"></canvas>
                    </td>
                    <td>
                        <canvas id="canvasOutput"></canvas>
                    </td>
                </tr>
                </table>
            </div>
            <script async src="../libs/opencv.js" type="text/javascript"></script>
            <script id="codeSnippet" type="text/javascript">
                let canvas = document.getElementById('canvasInput');
                let ctx = canvas.getContext('2d');
                let img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = function () {
                    canvas.width = img.width; canvas.height = img.height; 
                    ctx.drawImage(img, 0, 0, img.width, img.height);
                }; 
                img.src = 'cerise.jpg';
                var Module = {
                    // https://emscripten.org/docs/api_reference/module.html#Module.onRuntimeInitialized
                    onRuntimeInitialized() {
                        document.getElementById('status').innerHTML = 'OpenCV.js is ready.';
                        let src = cv.imread('canvasInput');
                        let dst = new cv.Mat();
                        // To distinguish the input and output, we graying the image.
                        // You can try different conversions.
                        cv.cvtColor(src, dst, cv.COLOR_RGBA2GRAY);
                        cv.imshow('canvasOutput', dst);
                        src.delete();
                        dst.delete();                        
                    }
                };                
            </script>
        </body>
    </html>





